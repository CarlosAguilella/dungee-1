<!DOCTYPE html>
<nav>
    <a href="start">Start new game</a>
    <a href="play">Play an existing game</a>    
</nav>
<h1>START</h1>

<nav>
    <button onclick="generarPin()">Start</button>
    <button onclick="mostrarPreguntas()" >Empezar partida</button>  
</nav>


<p id="pinEl"></p>
<p id="userEl"></p>
  
<p id="pregunta"></p>

<script>
    let pin;
    function generarPin (){
        pin = Math.floor(Math.random()*10000);
        pinEl.innerText = pin;
        setInterval(obtenerUsuario, 3000);       
    }    

    function obtenerUsuario (){
        fetch(`https://dungeer.vercel.app/api/damelosuser?pin=${pin}`)
        .then(datos => datos.json())
        .then(json => {
            
            let lista = "";

            for (const user in json.users) {
                lista += json.users[user].name + " ";
            }

            userEl.innerText = lista;
        });
    }    

    function mostrarPreguntas() {
        fetch(`https://dungeer.vercel.app/api/damelaspreguntas`)
            .then(datos => datos.json)
            .then(json => {
                let preguntas = "";

            for (const pregunta in json.preguntas) {
                preguntas += json.preguntas[pregunta] + " ";
            }
            console.log.preguntas;
            pregunta.innerText = preguntas;
        });
    }
    

</script>